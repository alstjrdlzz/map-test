<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Naver Map Panorama Example</title>
  <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=9sk408gt96&submodules=panorama"></script>
  <style>
    body {margin:0; padding:0;}
    #map {width:50%; height:100vh; float:left;}
    #pano {width:50%; height:100vh; float:left;}
  </style>
</head>
<body>
  <div id="map"></div>
  <div id="pano"></div>

  <script>
    // 쿼리스트링 파라미터 읽기
    function getQueryParam(name) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(name);
    }

    var lat = parseFloat(getQueryParam("lat")) || 37.5665;  // 기본값 서울시청
    var lng = parseFloat(getQueryParam("lng")) || 126.9780;
    var inputLatLng = new naver.maps.LatLng(lat, lon);

    // 지도
    var map = new naver.maps.Map('map', {
      center: inputLatLng,
      zoom: 16
    });

    // 파노라마
    var pano = new naver.maps.Panorama("pano", {
      position: inputLatLng,
      pov: {
        pan: -135,
        tilt: 29,
        fov: 100
      }
    });

    // 파노라마 실제 위치 확인
    naver.maps.Event.addListener(pano, 'init', function() {
      var panoPos = pano.getPosition();
      console.log("입력 좌표:", inputLatLng.toString());
      console.log("파노라마 실제 좌표:", panoPos.toString());

      // 지도에도 마커 두 개 찍기
      new naver.maps.Marker({
        position: inputLatLng,
        map: map,
        title: "입력 좌표",
        icon: {
          content: '<div style="background:red;width:12px;height:12px;border-radius:50%;"></div>',
          anchor: new naver.maps.Point(6,6)
        }
      });
      new naver.maps.Marker({
        position: panoPos,
        map: map,
        title: "파노라마 좌표",
        icon: {
            content: '<div style="background:blue;width:12px;height:12px;border-radius:50%;"></div>',
            anchor: new naver.maps.Point(6,6)
        }
      })
    });
  </script>
</body>
</html>
